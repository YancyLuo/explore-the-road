# 3653-3797 queue()队列

队列的基本原理就是利用数组，为队列添加一个函数实际上就是往数组里增加一项，出队就是取出数组的第一个元素执行。jQuery源码中，队列数组是利用`data_priv`（与上一节中的`data_user`一样，利用Data构造函数新建的，供jQuery内部使用）维护在元素的数据对象上的。jQuery内部有一个内置的动画队列（fx），动画队列在第一次添加时会立即出队，往后的动画队列执行是在一次出队的函数完成后再出队的。队列的promise方法是利用延迟对象实现的，在队列执行完成后，调用resolvedWith方法。